<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clinica</title>
  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  <style>
    .bg-clinica {
      background-color: #3982e2;
      background-image: url("assets/img/fondo.jpg");
      background-size: cover;
      background-repeat: no-repeat;
      margin: 0;
      height: 100vh;
    }
    .form-all{
        margin:0px auto;
        padding-top:20px;
        width:500px;
        color:rgb(255, 255, 255) !important;
        font-family:'Lato';
        font-size:18px;
    }
    .form-all {
  font-family: "Lato", sans-serif;
   }
.form-all {
  width: 500px;
  width: 100%;
  max-width: 500px;
}
.form-all {
  font-size: 18px;
}
.form-all {
  background-color: rgba(39, 38, 38, 0.55);
  border: 1px solid transparent;
  padding: 12px 0 0 0;
}
  </style>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- <script src="sweetalert2/dist/sweetalert2.all.min.js"></script>
  <script src="sweetalert2/dist/sweetalert2.min.js"></script>
  <link rel="stylesheet" href="sweetalert2/dist/sweetalert2.min.css"> -->

</head>
<body>
  <nav><h1>CLINICA INMACULAD ESSALUD</h1></nav>
    <div class="bg-clinica">
       <div class="container pb-5">
            <!--div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <img src="assets/img/presentacion.jpeg" class="d-block w-100" width="340" height="260" >
                </div>
                <div class="carousel-item">
                  <img src="assets/img/mamo1.PNG" class="d-block w-100" width="340" height="260">
                </div>
                <div class="carousel-item">
                  <img src="assets/img/riñon.jpg" class="d-block w-100" width="340" height="260">
                </div>
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
      </div-->
      <h1 class="text-center mt-3">
        Consulta de Beneficiario
        <p>Consulte si tus atenciones te corresponden en Clinica Inmaculada</p>
      </h1>
      <div class="form-all"> 
        <form id="target">
          <div class="row">
            <div class="col-md-5">
              <div class="mb-3">
                <label for="NRO_DOCUMENTO" class="form-label fw-bold">
                  DNI <span class="text-primary"> * </span>
                </label>
                <input type="text" class="form-control" id="NRO_DOCUMENTO" required>
                <!-- <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div> -->
              </div>
            </div>
            <div class="col-md-5">
              <div class="mb-3">
                <label for="NOMBRES_TRA" class="form-label fw-bold">
                  Nombres <span class="text-primary"> * </span>
                </label>
                <input type="text" class="form-control" id="NOMBRES_TRA" required>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-5">
              <div class="mb-3">
                <label for="AP_PATERNO" class="form-label fw-bold">
                  Apellido Paterno <span class="text-primary"> * </span>
                </label>
                <input type="text" class="form-control" id="AP_PATERNO" required>
              </div>
            </div>
            <div class="col-md-5">
              <div class="mb-3">
                <label for="AP_MATERNO" class="form-label fw-bold">
                  Apellido Materno <span class="text-primary"> * </span>
                </label>
                <input type="text" class="form-control" id="AP_MATERNO" required>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-5">
              <div class="mb-3">
                <label for="TELEFONO" class="form-label fw-bold" length=12>
                  Teléfono <span class="text-primary"> * </span>
                </label>
                <input type="number" class="form-control" id="TELEFONO" required>
              </div>
            </div>
          </div>
            <button type="submit" class="btn btn-primary">Aceptar</button>
       </form>
     </div>
      
    </div><!---fin de container-->
</body>
<script>
  $( "#target" ).submit(function( event ) {
    // alert( "Handler for .submit() called." );
    const NRO_DOCUMENTO = $( "#NRO_DOCUMENTO" ).val();
    const NOMBRES_TRA = $( "#NOMBRES_TRA" ).val();
    const AP_PATERNO = $( "#AP_PATERNO" ).val();
    const AP_MATERNO = $( "#AP_MATERNO" ).val();
    const TELEFONO = $( "#TELEFONO" ).val();

    axios({
      method: 'post',
      url: '/api/usuario',
      data: {
        NRO_DOCUMENTO,
        NOMBRES_TRA,
        AP_PATERNO,
        AP_MATERNO,
        TELEFONO
      }
    }).then(res => {

      console.log(res.data)
      if (!res.data.success) {

        Swal.fire({
          title: res.data.title,
          text: `${ res.data.msg }`,
          icon: res.data.icon,
          // showCancelButton: true,
          confirmButtonText: 'Aceptar',
          // cancelButtonText: 'Aceptar'
        }).then((result) => {
          if (result.isConfirmed) {
            $( "#NRO_DOCUMENTO" ).val("");
            $( "#NOMBRES_TRA" ).val("");
            $( "#AP_PATERNO" ).val("");
            $( "#AP_MATERNO" ).val("");
            $( "#TELEFONO" ).val("");
          }
        })

      } else {
        // Exito, el usuario se ha actualizado
        Swal.fire({
          title: res.data.title,
          text: `${ res.data.msg }`,
          icon: res.data.icon,
          // showCancelButton: true,
          confirmButtonText: 'Aceptar',
          // cancelButtonText: 'Aceptar'
        }).then((result) => {
          if (result.isConfirmed) {
            $( "#NRO_DOCUMENTO" ).val("");
            $( "#NOMBRES_TRA" ).val("");
            $( "#AP_PATERNO" ).val("");
            $( "#AP_MATERNO" ).val("");
            $( "#TELEFONO" ).val("");
          }
        })
      }     

    })
    event.preventDefault();
  });

  // $(document).ready(function(){

  //   function myclick() {
  //     alert('Myclick')
  //   }
  // });
</script>
</html>